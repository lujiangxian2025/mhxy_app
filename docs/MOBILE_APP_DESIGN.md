# 游戏助手 Android App 设计文档

## 现象层：用户痛点分析

### 核心场景
**通勤路上的远程控制者**：用户在地铁/公交上，需要快速查看家中服务器状态，启动/停止任务，调整配置。

### 痛点识别
1. **时间碎片化**：通勤时间短暂，操作必须快速完成
2. **网络不稳定**：移动网络延迟高，需要清晰的加载反馈
3. **单手操作**：站立时只能单手持机，交互区域受限
4. **信息密度**：小屏幕需要高效展示关键信息
5. **误操作风险**：摇晃环境下容易误触，需要二次确认

### 用户目标
- ✅ 3 秒内看到所有应用状态
- ✅ 5 秒内启动/停止任务
- ✅ 10 秒内完成配置修改
- ✅ 单手拇指可触达所有核心功能

---

## 本质层：交互架构设计

### 信息架构（IA）

```
App 根
├── 首页（Dashboard）          # 一屏看全，核心状态
│   ├── 服务器连接状态
│   ├── 应用实例列表（卡片）
│   │   └── 点击 → 应用详情
│   └── 创建应用入口
│
├── 应用详情（App Detail）     # 单个应用的完整信息
│   ├── 应用状态
│   ├── 当前任务
│   ├── 任务控制（启动/停止/暂停）
│   └── 配置快捷修改
│
└── 设置（Settings）           # 配置管理 + 低频操作
    ├── 服务器配置
    ├── 任务配置模板管理
    ├── 应用配置模板管理
    ├── 历史记录
    └── 关于
```

### 导航模式
**底部 Tab Bar（2 个核心 Tab）**
- 🏠 首页：状态总览 + 快速操作
- ⚙️ 设置：配置管理 + 低频操作

**设计理由**：
- **奥卡姆剃刀**：任务 Tab 的功能可被首页和详情页完全吸收，无独立存在理由
- **职责清晰**：首页 = 操作，设置 = 配置，边界分明
- **认知负担最低**：2 Tab 比 3 Tab 决策更快
- **拇指热区**：底部 Tab 最易触达

### 状态反馈机制
```
操作发起 → 立即 UI 反馈（乐观更新）
         ↓
      网络请求
         ↓
   成功 → 确认状态 + Toast
   失败 → 回滚状态 + 错误提示 + 重试按钮
```

---

## 哲学层：设计美学原则

### 原则 1：信息的呼吸感
**理念**：不是塞满屏幕，而是让关键信息自然呼吸。

**实践**：
- 卡片间距 16dp（拇指宽度）
- 单屏最多 3 个应用卡片（滚动查看更多）
- 状态用颜色而非文字（绿/黄/红点）

### 原则 2：操作的确定性
**理念**：移动环境下，用户需要明确知道"我点了什么"。

**实践**：
- 所有按钮有触觉反馈（Haptic Feedback）
- 危险操作（停止任务）需要长按 1 秒
- 加载状态用骨架屏而非转圈

### 原则 3：单手的优雅
**理念**：拇指热区是设计的第一约束。

**实践**：
- 核心操作在屏幕下半部分
- 顶部只展示信息，不放按钮
- 侧滑手势作为快捷操作（左滑停止，右滑启动）

### 原则 4：极简的克制
**理念**：每个屏幕只解决一个问题。

**实践**：
- 首页只看状态，不做复杂操作
- 详情页只管单个应用，不混杂其他
- 配置页只改一个参数，不堆砌表单

---

## 原型设计

### 屏幕 1：首页（Dashboard）

```
┌─────────────────────────────────┐
│  ●●●●●●●●●●●●●●●●●●●●●●●●●●●●●  │ ← 状态栏
├─────────────────────────────────┤
│                                 │
│  🏠 游戏助手                     │ ← 标题
│  ● 已连接 192.168.1.100         │ ← 服务器状态（绿点）
│                                 │
│  ┌───────────────────────────┐ │
│  │ GH-03 · 剑侠客             │ │ ← 应用卡片
│  │ ● 运行中 · 跑商任务        │ │   （绿点 = 运行中）
│  │ ⏱️  已运行 1h 23m          │ │
│  │                           │ │
│  │ [⏸️ 暂停]  [⏹️ 停止]       │ │ ← 快速操作
│  └───────────────────────────┘ │
│                                 │
│  ┌───────────────────────────┐ │
│  │ GH-04 · 飞燕女             │ │
│  │ ○ 已停止                   │ │   （灰点 = 已停止）
│  │                           │ │
│  │ [▶️ 启动任务]              │ │
│  └───────────────────────────┘ │
│                                 │
│  ┌───────────────────────────┐ │
│  │ + 创建新应用               │ │ ← 次要操作
│  └───────────────────────────┘ │
│                                 │
├─────────────────────────────────┤
│       🏠 首页      ⚙️ 设置       │ ← 底部导航（2 Tab）
└─────────────────────────────────┘
```

**设计要点**：
- **状态优先**：服务器连接状态置顶，一眼判断可用性
- **卡片化**：每个应用独立卡片，信息聚合
- **颜色语言**：绿（运行）、灰（停止）、红（错误）
- **快速操作**：常用操作直接暴露在卡片上
- **2 Tab 导航**：首页 = 操作，设置 = 配置，职责清晰

---

### 屏幕 2：应用详情（App Detail）

```
┌─────────────────────────────────┐
│  ← GH-03 · 剑侠客                │ ← 返回按钮
├─────────────────────────────────┤
│                                 │
│  ┌───────────────────────────┐ │
│  │ 应用状态                   │ │
│  │ ● 运行中                   │ │
│  │ 启动时间：14:23            │ │
│  │ 运行时长：1h 23m           │ │
│  └───────────────────────────┘ │
│                                 │
│  ┌───────────────────────────┐ │
│  │ 当前任务                   │ │
│  │ 📍 跑商任务                │ │
│  │ 配置：NewBee 跑商          │ │
│  └───────────────────────────┘ │
│                                 │
│  ┌───────────────────────────┐ │
│  │ 快速配置                   │ │
│  │                           │ │
│  │ 目标银票  [50000] ✏️       │ │ ← 点击编辑
│  │ 跑商轮数  [50] ✏️          │ │
│  │ 起始坐标  [100,200] ✏️     │ │
│  └───────────────────────────┘ │
│                                 │
│                                 │
│  ┌─────────────────────────┐   │
│  │   ⏹️  停止任务           │   │ ← 危险操作（红色）
│  └─────────────────────────┘   │
│                                 │
├─────────────────────────────────┤
│       🏠 首页      ⚙️ 设置       │
└─────────────────────────────────┘
```

**设计要点**：
- **信息分层**：状态 → 任务 → 配置，从概览到细节
- **即时编辑**：点击参数直接弹出输入框，无需跳转
- **危险操作隔离**：停止按钮独立放置，颜色警示

---

### 屏幕 3：设置（Settings）

```
┌─────────────────────────────────┐
│  ⚙️ 设置                         │
├─────────────────────────────────┤
│                                 │
│  ┌─ 服务器配置 ────────────┐   │
│  │                         │   │
│  │ 服务器地址              │   │
│  │ 192.168.1.100:8000      │   │
│  │ [测试连接]              │   │
│  │                         │   │
│  │ 自动重连                │   │
│  │ [●────────] 开启        │   │ ← 开关
│  └─────────────────────────┘   │
│                                 │
│  ┌─ 配置模板 ──────────────┐   │
│  │                         │   │
│  │ 应用配置模板  [管理 →]  │   │ ← 跳转管理页
│  │ 任务配置模板  [管理 →]  │   │
│  └─────────────────────────┘   │
│                                 │
│  ┌─ 其他 ──────────────────┐   │
│  │                         │   │
│  │ 历史记录     [查看 →]   │   │
│  │ 关于         v1.0.0     │   │
│  │ 清除缓存     [清除]     │   │
│  └─────────────────────────┘   │
│                                 │
├─────────────────────────────────┤
│       🏠 首页      ⚙️ 设置       │
└─────────────────────────────────┘
```

**设计要点**：
- **分组清晰**：服务器、配置模板、其他，逻辑分明
- **测试连接**：配置后立即验证，减少试错
- **配置模板管理**：任务配置和应用配置统一入口
- **历史记录**：低频功能放设置页，不占核心位置

---

## 交互流程设计

### 流程 1：启动任务（5 秒完成）

```
首页 → 点击已停止的应用卡片"启动任务"
                    ↓
              弹出任务选择器（Bottom Sheet）
              ┌─────────────────┐
              │ 选择任务类型     │
              │ ○ 捉鬼任务       │
              │ ○ 飞贼任务       │
              │ ○ 跑商任务       │
              │                 │
              │ 选择配置模板     │
              │ ○ NewBee 跑商   │
              │ ○ 星辰房跑商     │
              │ [确认启动]       │
              └─────────────────┘
                    ↓
              立即显示"启动中..."（乐观更新）
                    ↓
              API 调用成功 → Toast "任务已启动"
              API 调用失败 → Toast "启动失败，点击重试"
```

**设计要点**：
- **Bottom Sheet**：从底部滑出，单手易操作
- **任务 + 配置二选**：先选任务类型，再选配置模板
- **乐观更新**：立即反馈，不等待网络
- **容错设计**：失败后提供重试，不让用户迷失

---

### 流程 2：修改配置（10 秒完成）

```
应用详情 → 点击"目标银票 ✏️"
              ↓
         弹出数字键盘（Dialog）
         ┌─────────────────┐
         │ 修改目标银票     │
         │                 │
         │ [  50000  ]     │ ← 输入框（预填充当前值）
         │                 │
         │ 1  2  3         │
         │ 4  5  6         │ ← 数字键盘
         │ 7  8  9         │
         │ ←  0  ✓         │
         └─────────────────┘
              ↓
         点击 ✓ 确认
              ↓
         立即更新 UI（乐观更新）
              ↓
         API 调用成功 → Toast "配置已更新"
         API 调用失败 → 回滚 + Toast "更新失败"
```

**设计要点**：
- **模态对话框**：聚焦单一任务，避免干扰
- **预填充**：显示当前值，减少输入
- **数字键盘**：针对数值参数优化输入

---

### 流程 3：停止任务（防误触）

```
应用详情 → 长按"停止任务"按钮（1 秒）
              ↓
         触觉反馈（震动）
              ↓
         弹出确认对话框
         ┌─────────────────┐
         │ ⚠️  确认停止？   │
         │                 │
         │ 任务：NewBee 跑商│
         │ 已运行：1h 23m   │
         │                 │
         │ [取消] [确认]   │
         └─────────────────┘
              ↓
         点击"确认"
              ↓
         立即显示"停止中..."
              ↓
         API 调用成功 → Toast "任务已停止"
```

**设计要点**：
- **长按触发**：防止摇晃环境误触
- **二次确认**：显示关键信息，避免误操作
- **触觉反馈**：震动提示，增强确定性

---

## 技术架构

### 技术栈选择

```
UI 框架：Jetpack Compose（现代化、声明式）
网络层：Retrofit + OkHttp（成熟稳定）
状态管理：ViewModel + StateFlow（单向数据流）
本地存储：DataStore（替代 SharedPreferences）
依赖注入：Hilt（简化依赖管理）
```

**设计理由**：
- **Jetpack Compose**：声明式 UI，代码简洁，易于维护
- **单向数据流**：状态可预测，调试容易
- **DataStore**：类型安全，协程友好

### 模块划分

```
app/
├── ui/                      # UI 层（纯展示）
│   ├── home/               # 首页
│   ├── detail/             # 应用详情
│   ├── task/               # 任务中心
│   └── settings/           # 设置
│
├── data/                    # 数据层（API + 本地存储）
│   ├── remote/             # 网络请求
│   │   ├── ApiService.kt
│   │   └── dto/            # 数据传输对象
│   └── local/              # 本地存储
│       └── PreferencesManager.kt
│
├── domain/                  # 业务逻辑层
│   ├── model/              # 领域模型
│   ├── repository/         # 仓库接口
│   └── usecase/            # 用例（业务逻辑）
│
└── di/                      # 依赖注入
    └── AppModule.kt
```

**设计理由**：
- **分层清晰**：UI、数据、业务逻辑解耦
- **单一职责**：每个模块只做一件事
- **易于测试**：业务逻辑独立，可单元测试

---

## 视觉设计规范

### 颜色系统

```
主色调（Primary）：
- 蓝色 #2196F3（信任、科技感）

状态色：
- 成功/运行中：绿色 #4CAF50
- 警告/暂停：黄色 #FFC107
- 错误/停止：红色 #F44336
- 中性/未启动：灰色 #9E9E9E

背景色：
- 主背景：白色 #FFFFFF
- 卡片背景：浅灰 #F5F5F5
- 分割线：浅灰 #E0E0E0
```

### 字体系统

```
标题：Roboto Medium 18sp
正文：Roboto Regular 14sp
辅助文字：Roboto Regular 12sp（灰色）
按钮：Roboto Medium 16sp
```

### 间距系统

```
卡片间距：16dp
卡片内边距：16dp
按钮高度：48dp（拇指友好）
底部导航高度：56dp
```

### 圆角系统

```
卡片圆角：12dp
按钮圆角：8dp
对话框圆角：16dp
```

---

## 性能优化策略

### 1. 网络优化
- **请求合并**：首页一次请求获取所有应用状态
- **缓存策略**：状态数据缓存 5 秒，减少请求
- **超时控制**：移动网络超时设为 10 秒

### 2. UI 优化
- **懒加载**：历史记录分页加载
- **骨架屏**：加载时显示占位符，避免白屏
- **图片优化**：图标使用矢量图（SVG）

### 3. 电量优化
- **轮询间隔**：前台 5 秒，后台 30 秒
- **唤醒锁**：避免不必要的屏幕唤醒
- **网络监听**：无网络时停止轮询

---

## 开发路线图

### Phase 1：MVP（2 周）
- ✅ 首页：应用列表 + 状态展示
- ✅ 应用详情：任务信息 + 快速操作
- ✅ 网络层：API 调用封装
- ✅ 基础交互：启动/停止任务

### Phase 2：完善功能（1 周）
- ✅ 任务中心：运行中任务 + 快速启动
- ✅ 配置编辑：参数修改 + 验证
- ✅ 设置页：服务器配置 + 通知

### Phase 3：体验优化（1 周）
- ✅ 乐观更新：立即反馈 + 错误回滚
- ✅ 触觉反馈：按钮震动 + 长按确认
- ✅ 骨架屏：加载占位符

### Phase 4：高级功能（可选）
- 🔔 推送通知：任务完成 + 错误警报
- 📊 数据统计：任务效率分析
- 🌙 暗黑模式：夜间友好

---

## 总结：设计哲学的具现

### 现象层 → 本质层 → 哲学层

**现象**：用户在通勤路上需要快速控制家中服务器  
**本质**：信息密度与操作效率的平衡  
**哲学**：极简不是删除，而是让每个元素都有存在的理由

### 设计的三个真理

1. **信息的呼吸感**：不是塞满屏幕，而是让关键信息自然呼吸
2. **操作的确定性**：移动环境下，用户需要明确知道"我点了什么"
3. **单手的优雅**：拇指热区是设计的第一约束

### 代码即设计

```kotlin
// 好品味：状态用枚举，消除 if/else
enum class AppStatus { RUNNING, STOPPED, ERROR }

// 坏品味：字符串判断，分支爆炸
if (status == "running") { ... }
else if (status == "stopped") { ... }
else if (status == "error") { ... }
```

---

**设计者**：Kiro AI Assistant  
**文档版本**：v1.0  
**创建时间**：2026-02-05
